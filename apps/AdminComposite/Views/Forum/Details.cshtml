@using AdminComposite.Models
@using Euclid.Composites.Mvc.Extensions
@model UpdateForumInputModel
@{
	ViewBag.Title = Model.Name + " Details";
}

<script type="text/javascript">
	$(document).ready(function () {
		$("#forum-name").focus();
	});
</script>

<div class="article-container">
	<article>
		<header>
			<h2>@ViewBag.Title</h2>
		</header>
	</article>
	<section>
		<div class="sidetabs">
			<nav class="sidetab-switch">
				<ul>
					<li><a href="#test" class="default-sidetab current">Test</a></li>
					<li><a href="#production">Production</a></li>
				</ul>
			</nav>

			
			<div id="test" class="sidetab default-sidetab">
				@using (Html.BeginFormForInputModel(Model, true, Url.Action("Details", "Forum", new {forumId = Model.ForumIdentifier})))
				{
					@Html.HiddenFor(m => m.ForumIdentifier);
					<fieldset>
						<legend>Forum Details</legend>
						
						<dl>
							<dt><label for="forum-name">Name</label></dt>
							<dd>@Html.TextBoxFor(m => m.Name, new { id = "forum-name" })</dd>

							<dt><label for="forum-slug">Slug</label></dt>
							<dd>
								@Html.TextBoxFor(m=>m.UrlSlug, new {id="forum-slug"})
								<p><a href="#" id="generate-slug">generate slug</a></p>
							</dd>

							<dt><label for="forum-host">Host</label></dt>
							<dd>
								@Html.TextBoxFor(m => m.UrlHostName, new { id = "forum-host", @readonly = "readonly" })
								<p>Forum url: <b><span id="forum-url">http//socialrally.com/{organization-name}/forums/{forum-name}</span></b></p>
							</dd>

							<dt><label for="forum-description">Description</label></dt>
							<dd>
								@Html.TextAreaFor(m => m.Description, new { id = "forum-description", @class = "wysiwyg", @readonly = "readonly" })
							</dd>

							<dt class="checkbox"><label for="forum-private">Private</label></dt>
							<dd>
								@Html.CheckBoxFor(m=>m.Private, new {id="forum-private"})
							</dd>

							<dt class="checkbox"><label for="forum-moderated">Moderated</label></dt>
							<dd>
								@Html.CheckBoxFor(m => m.Moderated, new { id = "forum-moderated" })
							</dd>
						</dl>
					</fieldset>

					<fieldset>
						<legend>Other Settings to Copy</legend>

						<dl>
							<dt><label for="copy-badges">Badges</label></dt>
							<dd><input type="checkbox" id="copy-badges"/></dd>

							<dt><label for="copy-categories">Categories</label> </dt>
							<dd><input type="checkbox" id="copy-categories"/> </dd>

							<dt><label for="copy-voting">Voting</label></dt>
							<dd><input type="checkbox" id="copy-voting"/></dd>

							<dt><label for="copy-content">Content</label></dt>
							<dd><input type="checkbox" id="copy-content"/></dd>

							<dt><label for="copy-theme">Theme Selection</label></dt>
							<dd><input type="checkbox" id="copy-theme"/></dd>
						</dl>
					</fieldset>

					<button type="submit">Copy to Production</button>
					<button type="submit">Save Settings</button>
				}
			</div>

			<div id="production" class="sidetab" style="display: none">
				<form action="#">
					<fieldset>
						<legend>Forum Details</legend>
						
						<dl>
							<dt><label for="forum-name">Name</label></dt>
							<dd class="text">@Model.Name</dd>

							<dt><label for="forum-slug">Slug</label></dt>
							<dd class="text">
								@Model.UrlSlug
							</dd>

							<dt><label for="forum-host">Host</label></dt>
							<dd  class="text">
								@Model.UrlHostName
							</dd>

							<dt><label>Description</label></dt>
							<dd class="text">
								@Html.Raw(Model.Description)
							</dd>
						</dl>
						
						@{
							var forumUrl = string.Format("http//{0}/{1}/forums/{2}", Model.UrlHostName, @ViewBag.OrganizationSlug, @Model.UrlSlug);
						}
						<p class="notification information"><a href="@forumUrl" title="forum-url">@forumUrl</a></p>
					</fieldset>
				</form>
			</div>
		</div>
	</section>
</div>

@section Breadcrumbs{
	<ul id="breadcrumbs">
		<li>@Html.ActionLink("Home", "Index", "Dashboard")</li>
		<li>Forum Details</li>
	</ul>
}