@using AdminComposite.Models
@using Euclid.Composites.Mvc.Extensions
@model CreateForumInputModel
		   
<script type="text/javascript">
	$(document).ready(function () {
		$("#forum-name").focus();

		$("sumbit-create-command").click(function () {
			alert($("#forum-description").val());
			return false;
		});

		$(".voting-scheme").click(function () {
			var selectedIsChecked = $(this).is(":checked");
			var selectedId = $(this).attr("id");

			$(".voting-scheme").each(function (index, item) {
				var currentId = $(this).attr("id");
				if (selectedId != currentId && selectedIsChecked) {
					$(item).prop("checked", false);
				}
			});

			if (!$(".voting-scheme").is(":checked")) {
				$("#forum-voting-disabled").prop("checked", true);
			}
		});
	});
</script>

<article>
	<header>
		<h2>Add Forum</h2>
	</header>
</article>

<section id="forum-form-section">
@using (Html.BeginFormForInputModel(Model, true, Url.Action("Index", "Dashboard")))
	{
		@Html.HiddenFor(m=>m.OrganizationId)
		@Html.HiddenFor(m=>m.CreatedBy)
		<fieldset>
			<legend>Settings</legend>

			<dl>
				<dt><label for="forum-name">Name</label></dt>
				<dd>@Html.TextBoxFor(m => m.Name, new { id = "forum-name" })</dd>

				<dt><label for="forum-slug">Slug</label></dt>
				<dd>
					@Html.TextBoxFor(m=>m.UrlSlug, new {id="forum-slug"})
					<p><a href="#" id="generate-slug">generate slug</a></p>
				</dd>

				<dt><label for="forum-host">Host</label></dt>
				<dd>
					@Html.TextBoxFor(m => m.UrlHostName, new { id = "forum-host", @readonly = "readonly" })
					<p>Forum url: <b><span id="forum-url">http//socialrally.com/{organization-name}/forums/{forum-name}</span></b></p>
				</dd>

				<dt><label for="forum-description">Description</label></dt>
				<dd>
					@Html.TextAreaFor(m => m.Description, new { id = "forum-description", @class = "wysiwyg", @readonly = "readonly" })
				</dd>
			</dl>
	 	</fieldset>

		<fieldset>
			<legend>Voting</legend>
				
			<dl>
				<dt class="checkbox"><label for="forum-voting-enabled">None</label></dt>
				<dd>
					@Html.CheckBoxFor(m => m.DisableVoting, new { @class = "voting-scheme", id = "forum-voting-disabled" })
				</dd>

				<dt class="checkbox"><label for="forum-voting-updown">Up/Down</label></dt>
				<dd>
					@Html.CheckBoxFor(m => m.UpDownVoting, new { @class= "voting-scheme", id = "forum-voting-updown" })
				</dd>
			</dl>
		</fieldset>

		<input type="submit" class="button" value="Create Forum" id="sumbit-create-command"/>
	}
</section>

@section Breadcrumbs{
	<ul id="breadcrumbs">
		<li>@Html.ActionLink("Home", "Index", "Dashboard")</li>
		<li>Create Forum</li>
	</ul>
}